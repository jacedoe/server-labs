{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83c\udfe1 Inicio","text":"<p>\ud83c\udfe1 Gu\u00eda de Infraestructura Web Segura y Monitoreada</p> <p>\u00a1Bienvenido(a) a la documentaci\u00f3n de nuestro proyecto de infraestructura!Esta gu\u00eda exhaustiva detalla la configuraci\u00f3n y el despliegue de un entorno robusto y seguro para alojar una aplicaci\u00f3n web basada en WordPress. El proyecto se extiende desde la capa de virtualizaci\u00f3n hasta los servicios de seguridad y monitoreo automatizado.</p> <p>\ud83c\udfaf Objetivos del Proyecto.  El objetivo principal de esta documentaci\u00f3n es proporcionar un manual paso a paso y reproducible para cualquier persona que desee replicar una pila de hosting web moderno, ligero y seguro, centrado en el uso de Podman y t\u00faneles de acceso seguro.</p> <p>Plataforma Base: Instalar y configurar una m\u00e1quina virtual (VM) en XO-Lite/XCP-ng con Debian Trixie.</p> <p>Despliegue Web: Orquestar una aplicaci\u00f3n de WordPress utilizando contenedores Podman y podman-compose (NGINX, MariaDB).</p> <p>Seguridad y Acceso: Utilizar Cloudflare Tunnel para exponer el sitio a Internet de forma segura sin abrir puertos del firewall local.</p> <p>Monitoreo: Implementar un servicio automatizado con arp-scan y cron para escanear peri\u00f3dicamente la infraestructura y notificar cambios de red a trav\u00e9s de Postfix.</p> <p>\ud83d\uddfa\ufe0f Estructura de la Gu\u00eda. Utiliza el men\u00fa de navegaci\u00f3n lateral o superior para seguir el flujo de trabajo l\u00f3gico del despliegue:</p> <ol> <li> <p>Preparaci\u00f3n de la Infraestructura: Instalaci\u00f3n del hypervisor y la VM.</p> </li> <li> <p>Plataforma Web con Podman: Instalaci\u00f3n de Podman y el despliegue del stack de WordPress.</p> </li> <li> <p>Acceso y Seguridad: Configuraci\u00f3n de Cloudflare Tunnel para el acceso p\u00fablico.</p> </li> <li> <p>Monitoreo Automatizado: Implementaci\u00f3n de la alerta de red y la programaci\u00f3n con Cron.Ap\u00e9ndices: Comandos \u00fatiles, t\u00e9rminos y referencias.</p> </li> </ol>"},{"location":"apendices/comandos_utiles/","title":"Comandos \u00datiles","text":"<p>\ud83d\udee0\ufe0f Comandos \u00datiles y de Referencia Este ap\u00e9ndice contiene una lista de comandos esenciales para la gesti\u00f3n diaria y la soluci\u00f3n de problemas (troubleshooting) de los componentes clave de la infraestructura.</p> <ol> <li>\u2699\ufe0f Gesti\u00f3n de la M\u00e1quina Virtual (XO-Lite/XCP-ng Console) Estos comandos se ejecutan en la consola de root del servidor XCP-ng (el host de virtualizaci\u00f3n, no dentro de la VM Debian).</li> </ol> <p>Verificar el estado del host:</p> <pre><code>xe host-list\n</code></pre> <p>Verificar el estado de las VMs:</p> <pre><code>xe vm-list\n</code></pre> <p>Encender una VM (usando el nombre):</p> <pre><code>xe vm-start vm=[Nombre de la VM]\n</code></pre> <p>Apagar una VM (apagado limpio):</p> <pre><code>xe vm-shutdown vm=[Nombre de la VM]\n</code></pre> <p>Verificar el estado de los Storage Repositories (SR):</p> <pre><code>xe sr-list\n</code></pre> <ol> <li>\ud83d\udc33 Gesti\u00f3n de Contenedores (Podman) Estos comandos se ejecutan dentro de la VM Debian como tu usuario est\u00e1ndar (admin), en modo rootless.</li> </ol> <p>Verificar todos los contenedores (activos e inactivos):</p> <pre><code>podman ps -a\n</code></pre> <p>Verificar todas las im\u00e1genes descargadas:</p> <pre><code>podman images\n</code></pre> <p>Verificar las redes de Podman:</p> <pre><code>podman network ls\n</code></pre> <p>Detener el stack completo (en el directorio del podman-compose.yml):</p> <pre><code>podman-compose down\n</code></pre> <p>Reiniciar el stack:</p> <pre><code>podman-compose restart\n</code></pre> <p>Ver logs de un contenedor (ej: WordPress):</p> <pre><code>podman logs -f wordpress_app\n</code></pre> <p>Ejecutar un comando dentro de un contenedor (ej:   en NGINX):</p> <pre><code>podman exec -it nginx_proxy /bin/ \n</code></pre> <p>Limpiar contenedores y vol\u00famenes no utilizados (\u00a1Usar con precauci\u00f3n!):</p> <pre><code>podman system prune\n</code></pre> <ol> <li>\ud83d\udee1\ufe0f Monitoreo y Correo (Postfix/Cron/Cloudflared) Estos comandos se ejecutan en la VM Debian para verificar el estado de los servicios de monitoreo y acceso seguro.</li> </ol> <p>A. Cloudflare Tunnel Verificar el estado del servicio cloudflared:</p> <pre><code>sudo systemctl status cloudflared\n</code></pre> <p>Ver logs del servicio cloudflared:</p> <pre><code>sudo journalctl -u cloudflared -f\n</code></pre> <p>B. Postfix (Correo) Verificar la cola de correo (mensajes pendientes de env\u00edo):</p> <pre><code>mailq\n</code></pre> <p>Vaciar la cola de correo (forzar el env\u00edo):</p> <pre><code>sudo postfix flush\n</code></pre> <p>Verificar los logs de correo:</p> <pre><code>tail -f /var/log/mail.log\n</code></pre> <p>C. Cron y Escaneo Verificar la crontab de root:</p> <pre><code>sudo crontab -l\n</code></pre> <p>Ejecutar el script de escaneo manualmente (para pruebas):</p> <pre><code>sudo /home/admin/scripts/infra-scan/infra_scan.sh\n</code></pre> <p>Verificar el log de escaneo:</p> <pre><code>tail -f /home/admin/scripts/infra-scan/scan_log.txt\n</code></pre> <p>\ud83d\udee0\ufe0f </p>"},{"location":"monitoreo/instalacion_postfix/","title":"4.1. Configuraci\u00f3n de Postfix","text":"<ol> <li>\ud83d\udee1\ufe0f Instalaci\u00f3n y Configuraci\u00f3n de Postfix para Notificaciones Para que el script de escaneo de infraestructura pueda enviarte alertas por correo electr\u00f3nico, necesitamos configurar un agente de transferencia de correo (MTA). Usaremos Postfix como un relay simple para retransmitir correos a un servidor SMTP externo (como Gmail, Outlook, o tu proveedor de correo).</li> </ol> <p>6.1. Instalaci\u00f3n de Postfix Instalar el paquete:</p> <p>sudo apt update sudo apt install -y postfix mailutils libsasl2-2 ca-certificates sasl2-bin Asistente de Configuraci\u00f3n: Durante la instalaci\u00f3n, Postfix te preguntar\u00e1 sobre el tipo de configuraci\u00f3n. Selecciona las siguientes opciones:</p> <p>Tipo de configuraci\u00f3n de correo (General type of mail configuration): Internet con 'smarthost' (esto nos permitir\u00e1 usar un servidor externo para el env\u00edo).</p> <p>Nombre de correo del sistema (System mail name): El hostname de tu VM (ej: vm-podman-web.local).</p> <p>Servidor SmartHost (Smarthost): Aqu\u00ed pondr\u00e1s la direcci\u00f3n del servidor SMTP de tu proveedor (ej: smtp.gmail.com:587).</p> <p>6.2. Configuraci\u00f3n como Smarthost (Ejemplo con Gmail/TLS) Si utilizaste el asistente, ya tienes la base. Ahora, editaremos el archivo de configuraci\u00f3n principal para detallar la autenticaci\u00f3n.</p> <p>Editar main.cf:</p> <p>sudo vim /etc/postfix/main.cf A\u00f1adir las siguientes l\u00edneas al final del archivo:</p>"},{"location":"monitoreo/instalacion_postfix/#configuraciones-de-tls-y-sasl","title":"Configuraciones de TLS y SASL","text":"<p>smtp_sasl_auth_enable = yes smtp_sasl_security_options = noanonymous smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd smtp_tls_security_level = encrypt smtp_tls_CAfile = /etc/ssl/certs/ca-certificates.crt</p>"},{"location":"monitoreo/instalacion_postfix/#restriccion-de-dominios-que-envian-solo-localhost","title":"Restricci\u00f3n de dominios que env\u00edan (solo localhost)","text":"<p>mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128</p>"},{"location":"monitoreo/instalacion_postfix/#opcional-reemplazar-la-direccion-del-remitente-por-un-correo-especifico","title":"Opcional: Reemplazar la direcci\u00f3n del remitente por un correo espec\u00edfico","text":""},{"location":"monitoreo/instalacion_postfix/#sender_canonical_maps-hashetcpostfixsender_canonical","title":"sender_canonical_maps = hash:/etc/postfix/sender_canonical","text":"<p>Aseg\u00farate de que la l\u00ednea relayhost = [smtp.gmail.com]:587 (o tu smarthost) est\u00e9 presente y no comentada.</p> <p>6.3. Configuraci\u00f3n de Credenciales de Autenticaci\u00f3n Necesitas un archivo para almacenar el usuario y la contrase\u00f1a (o la App Password en servicios como Gmail) del servidor SMTP externo.</p> <p>Crear el archivo sasl_passwd:</p> <p>sudo nano /etc/postfix/sasl_passwd A\u00f1adir las credenciales:</p> <p>[smtp.gmail.com]:587  tu_correo@gmail.com:tu_contrase\u00f1a_o_app_password \u00a1ADVERTENCIA DE SEGURIDAD! Utiliza siempre una Contrase\u00f1a de Aplicaci\u00f3n espec\u00edfica para esto, y no tu contrase\u00f1a principal, especialmente si usas 2FA.</p> <p>Generar el archivo de hash y protegerlo:</p> <p>sudo postmap /etc/postfix/sasl_passwd sudo rm /etc/postfix/sasl_passwd # Elimina el archivo de texto plano sudo chmod 600 /etc/postfix/sasl_passwd.db 6.4. Reiniciar y Probar el Servicio Reiniciar Postfix:</p> <p>sudo systemctl restart postfix Prueba de Env\u00edo: Env\u00eda un correo de prueba a tu bandeja de entrada:</p> <p>echo \"Prueba de Postfix - Todo OK\" | mail -s \"Alerta: Postfix Configurado\" tu_correo_personal@ejemplo.com Verificar Logs: Si el correo no llega, revisa el log de Postfix:</p> <p>tail /var/log/mail.log Busca mensajes como status=sent para confirmar la entrega exitosa.</p> <p>Con Postfix configurado, tenemos la capacidad de notificar sobre eventos de la infraestructura.</p>"},{"location":"monitoreo/programacion_cron/","title":"4.3. Programaci\u00f3n con Cron","text":"<ol> <li>\u23f2\ufe0f Programaci\u00f3n de Tareas con CronEl servicio cron en Linux se utiliza para programar comandos o scripts para que se ejecuten autom\u00e1ticamente en un momento o intervalo regular. Lo utilizaremos para ejecutar el script de escaneo de infraestructura (infra_scan.sh) peri\u00f3dicamente.</li> </ol> <p>8.1. Entendiendo la CrontabCada usuario en el sistema puede tener su propia tabla de cron (crontab). Como nuestro script utiliza sudo (porque arp-scan necesita privilegios de root), la forma m\u00e1s segura y confiable es programarlo directamente en la crontab de root.El formato b\u00e1sico de una l\u00ednea de crontab es:[MINUTO] [HORA] [D\u00cdA_DEL_MES] [MES] [D\u00cdA_DE_LA_SEMANA] [COMANDO_A_EJECUTAR]</p> <p>8.2. Configuraci\u00f3n de la Tarea ProgramadaEditar la Crontab de Root:Usa el siguiente comando para abrir el archivo de programaci\u00f3n del usuario root: sudo crontab -e Si es la primera vez, se te pedir\u00e1 seleccionar un editor (ej: nano).A\u00f1adir la Tarea de Escaneo:A\u00f1ade la siguiente l\u00ednea al final del archivo. Este ejemplo programa el script para que se ejecute cada 5 minutos:Fragmento de c\u00f3digo</p> <pre><code># Tarea: Escaneo de Infraestructura cada 5 minutos\n*/5 * * * * /home/admin/scripts/infra-scan/infra_scan.sh\n</code></pre> <p>CampoValorDescripci\u00f3nMinuto/5Ejecutar cada 5 minutos (0, 5, 10, 15...)HoraCada horaD\u00eda del MesCada d\u00eda del mesMesCada mesD\u00eda de la Semana*Cada d\u00eda de la semanaComando/home/admin/...La ruta completa del scriptAlternativa (Ejecuci\u00f3n Diaria): Si prefieres un escaneo menos frecuente, puedes usar, por ejemplo, 0 2 * * * para ejecutarlo todos los d\u00edas a las 2:00 AM.Guardar y Salir:Guarda el archivo (en nano, Ctrl+O, Enter, y luego Ctrl+X). cron cargar\u00e1 autom\u00e1ticamente el nuevo horario.8.3. Verificaci\u00f3n de la Ejecuci\u00f3nPara asegurarte de que la tarea se est\u00e1 ejecutando correctamente, puedes hacer dos cosas:Revisar el Log del Script:El script est\u00e1 dise\u00f1ado para escribir una entrada en un archivo de log cada vez que se ejecuta. </p> <pre><code>tail -f /home/admin/scripts/infra-scan/scan_log.txt\n</code></pre> <p>Espera 5 minutos y deber\u00edas ver una nueva l\u00ednea con la marca de tiempo de la ejecuci\u00f3n.Revisar el Log del Sistema (opcional):En sistemas Debian, los eventos de cron a menudo se registran en el log principal: grep CRON /var/log/syslog Busca entradas que confirmen que la l\u00ednea de comando fue iniciada por cron.</p>"},{"location":"monitoreo/script_arp_scan/","title":"4.2. Script de Escaneo (arp-scan)","text":"<ol> <li>\ud83d\udd75\ufe0f\u200d\u2642\ufe0f Script de Escaneo de Infraestructura con arp-scan Este script   se encarga de monitorear la red local para detectar nuevos dispositivos (o dispositivos que desaparecen) y notificar al administrador por correo electr\u00f3nico.</li> </ol> <p>7.1. Instalaci\u00f3n de arp-scan La herramienta arp-scan es necesaria para escanear la red a nivel ARP y obtener informaci\u00f3n precisa sobre los hosts conectados, incluso si tienen un firewall activo a nivel IP.</p>"},{"location":"monitoreo/script_arp_scan/#instalar-arp-scan","title":"Instalar arp-scan","text":"<pre><code>sudo apt install -y arp-scan\n</code></pre>"},{"location":"monitoreo/script_arp_scan/#nota-arp-scan-debe-ejecutarse-con-privilegios-de-root-sudo","title":"Nota: arp-scan debe ejecutarse con privilegios de root (sudo)","text":"<p>7.2. Creaci\u00f3n de la Lista de Referencia Necesitas un archivo que contenga la lista de dispositivos \"conocidos\" en tu infraestructura. Este archivo ser\u00e1 la base de la comparaci\u00f3n.</p> <p>Realizar el primer escaneo de la red (como root): Ajusta el rango de red (192.168.1.0/24) a tu subred. <code>sudo arp-scan --localnet | grep -E '([0-9A-Fa-f]{2}:){5}[0-9A-Fa-f]{2}' | awk '{print $2, $1}' | sort &gt; ~/scripts/infra-scan/known_devices.txt</code> Este comando escanea, filtra solo las l\u00edneas con direcciones MAC, invierte el orden (MAC primero) y guarda la lista ordenada.</p> <p>Verificar el contenido:</p> <pre><code>cat ~/scripts/infra-scan/known_devices.txt\n</code></pre> <p>El formato de cada l\u00ednea debe ser: [Direcci\u00f3n IP] [Direcci\u00f3n MAC].</p> <p>7.3. Desarrollo del Script   (infra_scan.sh) Crea el directorio y el archivo del script.</p> <p>`` mkdir -p ~/scripts/infra-scan nano ~/scripts/infra-scan/infra_scan.sh</p> <pre><code>A\u00f1ade el siguiente c\u00f3digo al archivo. Aseg\u00farate de reemplazar las variables con tus valores (direcci\u00f3n IP, correo).\n\n</code></pre>"},{"location":"monitoreo/script_arp_scan/#binbash","title":"!/bin/bash","text":""},{"location":"monitoreo/script_arp_scan/#-variables-de-configuracion-","title":"--- VARIABLES DE CONFIGURACI\u00d3N ---","text":"<p>SUBNET=\"192.168.1.0/24\" KNOWN_DEVICES_FILE=\"/home/admin/scripts/infra-scan/known_devices.txt\" LOG_FILE=\"/home/admin/scripts/infra-scan/scan_log.txt\" RECIPIENT_EMAIL=\"tu_correo_personal@ejemplo.com\" SENDER_NAME=\"VM-Monitoreo\" TEMP_CURRENT_SCAN=\"/tmp/current_scan.txt\"</p>"},{"location":"monitoreo/script_arp_scan/#-funciones-","title":"--- FUNCIONES ---","text":""},{"location":"monitoreo/script_arp_scan/#funcion-para-enviar-la-alerta-por-correo","title":"Funci\u00f3n para enviar la alerta por correo","text":"<p>send_alert() {     local subject=\"$1\"     local message=\"$2\"     echo -e \"$message\" | mail -s \"$subject\" -a \"From: $SENDER_NAME &lt;$RECIPIENT_EMAIL&gt;\" \"$RECIPIENT_EMAIL\" }</p>"},{"location":"monitoreo/script_arp_scan/#-ejecucion-del-escaneo-","title":"--- EJECUCI\u00d3N DEL ESCANEO ---","text":""},{"location":"monitoreo/script_arp_scan/#1-realizar-un-escaneo-actual-y-limpiar-el-resultado-requiere-sudo","title":"1. Realizar un escaneo actual y limpiar el resultado (REQUIERE SUDO)","text":"<p>sudo arp-scan --localnet --interface eth0 | grep -E '([0-9A-Fa-f]{2}:){5}[0-9A-Fa-f]{2}' | awk '{print $2, $1}' | sort &gt; $TEMP_CURRENT_SCAN</p>"},{"location":"monitoreo/script_arp_scan/#2-comparar-el-escaneo-actual-con-la-lista-de-dispositivos-conocidos","title":"2. Comparar el escaneo actual con la lista de dispositivos conocidos","text":""},{"location":"monitoreo/script_arp_scan/#21-buscar-dispositivos-nuevos","title":"2.1. Buscar dispositivos NUEVOS","text":"<p>NEW_DEVICES=$(comm -13 \"$KNOWN_DEVICES_FILE\" \"$TEMP_CURRENT_SCAN\")</p> <p>if [ -n \"$NEW_DEVICES\" ]; then     ALERT_SUBJECT=\"\ud83d\udea8 ALERTA DE SEGURIDAD: Dispositivos Nuevos Detectados\"     ALERT_MESSAGE=\"Se han detectado los siguientes dispositivos no registrados en la red:\\n\\n$NEW_DEVICES\\n\\nPor favor, verifica su origen.\"     send_alert \"$ALERT_SUBJECT\" \"$ALERT_MESSAGE\"     echo \"$(date): Dispositivos nuevos detectados. Alerta enviada.\" &gt;&gt; $LOG_FILE fi</p>"},{"location":"monitoreo/script_arp_scan/#22-buscar-dispositivos-desaparecidos","title":"2.2. Buscar dispositivos DESAPARECIDOS","text":""},{"location":"monitoreo/script_arp_scan/#nota-la-comparacion-se-invierte-para-encontrar-lineas-que-estan-en-el-archivo-conocido-pero-no-en-el-actual","title":"Nota: La comparaci\u00f3n se invierte para encontrar l\u00edneas que est\u00e1n en el archivo conocido pero no en el actual","text":"<p>MISSING_DEVICES=$(comm -23 \"$KNOWN_DEVICES_FILE\" \"$TEMP_CURRENT_SCAN\")</p> <p>if [ -n \"$MISSING_DEVICES\" ]; then     ALERT_SUBJECT=\"\u26a0\ufe0f NOTIFICACI\u00d3N: Dispositivos Desaparecidos\"     ALERT_MESSAGE=\"Los siguientes dispositivos han desaparecido de la red:\\n\\n$MISSING_DEVICES\"     send_alert \"$ALERT_SUBJECT\" \"$ALERT_MESSAGE\"     echo \"$(date): Dispositivos desaparecidos. Notificaci\u00f3n enviada.\" &gt;&gt; $LOG_FILE fi</p>"},{"location":"monitoreo/script_arp_scan/#3-si-no-hay-cambios","title":"3. Si no hay cambios","text":"<p>if [ -z \"$NEW_DEVICES\" ] &amp;&amp; [ -z \"$MISSING_DEVICES\" ]; then     echo \"$(date): Escaneo completado. No se detectaron cambios.\" &gt;&gt; $LOG_FILE fi</p>"},{"location":"monitoreo/script_arp_scan/#4-actualizar-la-lista-de-dispositivos-conocidos-si-se-desea-que-los-nuevos-se-acepten-automaticamente","title":"4. Actualizar la lista de dispositivos conocidos (si se desea que los nuevos se \"acepten\" autom\u00e1ticamente)","text":""},{"location":"monitoreo/script_arp_scan/#si-no-quieres-que-se-actualice-automaticamente-comenta-la-linea-de-abajo-y-actualiza-manualmente-el-archivo-known_devicestxt","title":"Si no quieres que se actualice autom\u00e1ticamente, comenta la l\u00ednea de abajo y actualiza manualmente el archivo known_devices.txt","text":""},{"location":"monitoreo/script_arp_scan/#cat-temp_current_scan-known_devices_file","title":"cat $TEMP_CURRENT_SCAN &gt; $KNOWN_DEVICES_FILE","text":""},{"location":"monitoreo/script_arp_scan/#5-limpieza","title":"5. Limpieza","text":"<p>rm $TEMP_CURRENT_SCAN</p> <pre><code>7.4. Permisos de Ejecuci\u00f3n\nOtorga permisos de ejecuci\u00f3n al script:\n</code></pre> <p>chmod +x ~/scripts/infra-scan/infra_scan.sh</p> <pre><code>7.5. Prueba Manual\nAntes de automatizar con cron, prueba el script manualmente como root (ya que arp-scan lo requiere):\n</code></pre> <p>sudo ~/scripts/infra-scan/infra_scan.sh ``` Si tienes cambios en la red o borraste known_devices.txt, deber\u00edas recibir un correo.</p>"},{"location":"preparacion/despliegue_vm_debian/","title":"1.2. Despliegue VM Debian Trixie","text":"<ol> <li>Despliegue y Configuraci\u00f3n de la VM Debian Trixie Una vez que el servidor XCP-ng/XO-Lite est\u00e1 operativo, el siguiente paso es crear y configurar nuestra M\u00e1quina Virtual (VM) invitada que servir\u00e1 como host para Podman y los servicios de monitoreo.</li> </ol> <p>2.1. Creaci\u00f3n de la VM en XO-Lite Utilizaremos la interfaz XO-Lite para iniciar el proceso de creaci\u00f3n de la nueva VM.</p> <p>Navegar al Asistente: En XO-Lite, dir\u00edgete a la secci\u00f3n de VMs y selecciona la opci\u00f3n para crear una nueva m\u00e1quina virtual.</p> <p>Selecci\u00f3n de Plantilla (Template):</p> <p>Elige una plantilla de Debian 12 (64-bit). Esto optimizar\u00e1 los par\u00e1metros iniciales de la VM.</p> <p>Configuraci\u00f3n de Recursos: Asigna los recursos iniciales a la VM. Ajusta estos valores seg\u00fan tus necesidades, pero se recomiendan los siguientes m\u00ednimos:</p> <p>Nombre: vm-podman-web (o un nombre descriptivo).</p> <p>CPU: 2 vCPUs</p> <p>RAM: 2 GB (o 4 GB si se planea una carga considerable en WordPress).</p> <p>Disco: 40 GB (aseg\u00farate de que el SR configurado tenga espacio suficiente).</p> <p>Configuraci\u00f3n de Red: Aseg\u00farate de que la VM est\u00e9 conectada a la red virtual correcta que permite el acceso desde tu red local.</p> <p>Instalaci\u00f3n del SO:</p> <p>Carga la imagen ISO de instalaci\u00f3n de Debian 12 \"Trixie\" en la biblioteca de ISOs de XO-Lite y selecci\u00f3nala para el primer arranque de la VM.</p> <p>Inicio de la VM: Enciende la VM y la consola se abrir\u00e1, mostrando el instalador de Debian.</p> <p>2.2. Proceso de Instalaci\u00f3n de Debian 12 Sigue el proceso de instalaci\u00f3n est\u00e1ndar de Debian, prestando atenci\u00f3n a los siguientes puntos clave:</p> <p>Particionado: Se recomienda usar la opci\u00f3n de particionado guiado para principiantes, o crear un esquema con una partici\u00f3n /home separada para mayor flexibilidad.</p> <p>Configuraci\u00f3n de Red: El instalador detectar\u00e1 la red. Es crucial configurar una direcci\u00f3n IP est\u00e1tica para el servidor, ya que alojar\u00e1 servicios cr\u00edticos.</p> <p>IP est\u00e1tica: 192.168.1.XX (elige una que no est\u00e9 en el rango DHCP).</p> <p>M\u00e1scara de red, Gateway y Servidores DNS (por ejemplo, los de Cloudflare, 1.1.1.1).</p> <p>Usuarios: Crea una cuenta de usuario est\u00e1ndar (ej: admin). No olvides la contrase\u00f1a de root.</p> <p>Selecci\u00f3n de Software: Desmarca cualquier entorno de escritorio (GNOME, KDE, etc.) ya que este ser\u00e1 un servidor sin interfaz gr\u00e1fica. Aseg\u00farate de que solo est\u00e9n marcados \"servidor SSH\" y \"utilidades est\u00e1ndar del sistema\".</p> <p>2.3. Configuraci\u00f3n Post-Instalaci\u00f3n Una vez que la instalaci\u00f3n haya finalizado y hayas reiniciado la VM, accede a ella a trav\u00e9s de SSH usando el usuario est\u00e1ndar que creaste:</p> <p>ssh admin@192.168.1.XX A. Actualizaci\u00f3n del Sistema Es fundamental mantener el sistema actualizado:</p> <p>sudo apt update sudo apt upgrade -y</p> <p>B. Instalaci\u00f3n de Herramientas Esenciales Instala herramientas que facilitar\u00e1n la gesti\u00f3n y la configuraci\u00f3n posterior:</p> <p>sudo apt install -y vim curl wget net-tools</p>"},{"location":"preparacion/instalacion_xo_lite/","title":"1.1. Servidor XO-Lite","text":"<p>Parece que la b\u00fasqueda se ha centrado en X-Lite (un softphone o aplicaci\u00f3n de tel\u00e9fono SIP), y no en XO-Lite (la interfaz web ligera para administrar el hypervisor XCP-ng/XenServer).</p> <p>Voy a enfocarme en la documentaci\u00f3n de XO-Lite (la interfaz de XCP-ng) como acordamos.</p> <p>Aqu\u00ed tienes el borrador para el primer archivo de tu documentaci\u00f3n, que ir\u00e1 en la ruta: docs/preparacion/instalacion_xo_lite.md.</p> <ol> <li>Instalaci\u00f3n y Configuraci\u00f3n del Servidor XO-Lite Este documento detalla el proceso para establecer la plataforma de virtualizaci\u00f3n. Utilizaremos XO-Lite, una interfaz web ligera y moderna, para gestionar el hypervisor XCP-ng (o XenServer).</li> </ol> <p>1.1. Prerrequisitos Antes de comenzar, aseg\u00farate de tener:</p> <p>Un servidor f\u00edsico o m\u00e1quina donde se instalar\u00e1 el hypervisor XCP-ng.</p> <p>Medios de instalaci\u00f3n de XCP-ng (USB o ISO).</p> <p>Acceso a la red local.</p> <p>Nota Importante: XO-Lite no es el hypervisor, sino la interfaz de gesti\u00f3n. Primero se instala XCP-ng y luego se accede a su interfaz web integrada.</p> <p>1.2. Instalaci\u00f3n del Hypervisor XCP-ng La instalaci\u00f3n de XCP-ng es el paso fundacional para acceder a XO-Lite.</p> <p>Arranque desde el medio de instalaci\u00f3n: Inicia el servidor usando la imagen ISO o USB de XCP-ng.</p> <p>Sigue el asistente de instalaci\u00f3n:</p> <p>Selecciona el idioma y la distribuci\u00f3n del teclado.</p> <p>Acepta el acuerdo de licencia (EULA).</p> <p>Selecciona el disco donde se instalar\u00e1 el sistema operativo del hypervisor.</p> <p>Configura la contrase\u00f1a de root. \u00a1Guarda esta contrase\u00f1a de forma segura! Es esencial para la gesti\u00f3n.</p> <p>Configura la red (IP est\u00e1tica recomendada para un servidor).</p> <p>Configura la zona horaria.</p> <p>Finalizaci\u00f3n: El sistema se instalar\u00e1 y te pedir\u00e1 que retires el medio y reinicies.</p> <p>1.3. Acceso Inicial a la Interfaz XO-Lite Una vez que el servidor XCP-ng se haya reiniciado, ver\u00e1s la consola de bienvenida.</p> <p>Obtener la Direcci\u00f3n IP: La consola mostrar\u00e1 la direcci\u00f3n IP asignada al servidor (la que configuraste). Por ejemplo: 192.168.1.10.</p> <p>Acceder al Navegador: Abre tu navegador web y navega a la direcci\u00f3n IP del servidor usando HTTPS:</p> <p>https://[Direcci\u00f3n IP del Servidor XCP-ng] Aceptar el Certificado: Es probable que tu navegador muestre una advertencia de seguridad (certificado autofirmado). Acepta la advertencia para continuar.</p> <p>Inicio de Sesi\u00f3n: Ser\u00e1s redirigido a la interfaz XO-Lite.</p> <p>Usuario: root</p> <p>Contrase\u00f1a: La que configuraste durante la instalaci\u00f3n de XCP-ng.</p> <p>1.4. Configuraci\u00f3n Post-Instalaci\u00f3n en XO-Lite Una vez dentro de XO-Lite, realiza las siguientes configuraciones b\u00e1sicas:</p> <p>A. Configuraci\u00f3n de Red Verifica que la configuraci\u00f3n de la interfaz de red (NIC) sea correcta (IP, m\u00e1scara, gateway).</p> <p>Si deseas tener diferentes VLANs o redes, este es el lugar para configurar Redes Virtuales.</p> <p>B. Configuraci\u00f3n de Almacenamiento (Storage) Crear un SR (Storage Repository): Para alojar las m\u00e1quinas virtuales, debes definir d\u00f3nde se guardar\u00e1n.</p> <p>Si instalaste en un disco peque\u00f1o y tienes un disco m\u00e1s grande para VMs, crea un nuevo SR utilizando ese espacio.</p> <p>Opciones comunes: LVM Local (si es un disco f\u00edsico dedicado), NFS o SMB (si usas almacenamiento en red).</p> <p>C. Actualizaciones Aseg\u00farate de que el hypervisor est\u00e9 actualizado. XO-Lite facilita la aplicaci\u00f3n de parches y actualizaciones de XCP-ng.</p>"},{"location":"seguridad/cloudflare_tunnel/","title":"3.1. Cloudflare Tunnel","text":"<ol> <li>\ud83d\udd12 Conexi\u00f3n Segura con Cloudflare Tunnel Cloudflare Tunnel (anteriormente conocido como Argo Tunnel) crea una conexi\u00f3n saliente segura entre tu VM (servidor local) y la red de Cloudflare. Esto permite que el tr\u00e1fico web llegue a tus contenedores sin exponer directamente tu IP p\u00fablica o requerir configuraciones complejas de firewall o redirecci\u00f3n de puertos (port forwarding).</li> </ol> <p>5.1. Prerrequisitos en Cloudflare Dominio Activo: Tu dominio debe estar utilizando los servidores de nombres de Cloudflare.</p> <p>Registro DNS: Aseg\u00farate de tener un registro A o CNAME en Cloudflare para el subdominio que usar\u00e1s (ej: web.tudominio.com). El valor de la IP puede ser ficticio, ya que el Tunnel lo anular\u00e1.</p> <p>5.2. Instalaci\u00f3n del Cliente cloudflared Instalaremos el cliente que gestionar\u00e1 el t\u00fanel en tu VM Debian Trixie.</p> <p>Descargar el Repositorio de Cloudflare:</p> <p>curl -fsSL https://pkg.cloudflare.com/pubkey.gpg | sudo gpg --dearmor -o /usr/share/keyrings/cloudflare.gpg echo 'deb [signed-by=/usr/share/keyrings/cloudflare.gpg] https://pkg.cloudflare.com/cloudflared trixie main' | sudo tee /etc/apt/sources.list.d/cloudflared.list Actualizar e Instalar:</p> <p>sudo apt update sudo apt install -y cloudflared 5.3. Creaci\u00f3n y Configuraci\u00f3n del Tunnel La configuraci\u00f3n se realiza en dos partes: autenticaci\u00f3n y definici\u00f3n del t\u00fanel (rutas).</p> <p>A. Autenticaci\u00f3n Autentica tu cloudflared con tu cuenta de Cloudflare. Se te pedir\u00e1 iniciar sesi\u00f3n en el navegador.</p> <p>cloudflared tunnel login Se abrir\u00e1 una URL en tu terminal. P\u00e9gala en tu navegador, inicia sesi\u00f3n en Cloudflare y selecciona tu dominio.</p> <p>B. Crear el T\u00fanel Asigna un nombre a tu t\u00fanel y crea la configuraci\u00f3n local.</p> <p>Crear el T\u00fanel:</p> <p>cloudflared tunnel create wp-tunnel</p>"},{"location":"seguridad/cloudflare_tunnel/#esto-te-dara-un-id-de-tunel-unico-que-necesitaras","title":"(Esto te dar\u00e1 un ID de t\u00fanel \u00fanico que necesitar\u00e1s)","text":"<p>Crear el Archivo de Configuraci\u00f3n (config.yml): Crea el directorio de configuraci\u00f3n para cloudflared y el archivo config.yml.</p> <p>sudo mkdir /etc/cloudflared sudo nano /etc/cloudflared/config.yml Pega la siguiente configuraci\u00f3n, asegur\u00e1ndote de reemplazar  con el ID \u00fanico que obtuviste en el paso anterior: <p>YAML</p> <p>tunnel:  credentials-file: /root/.cloudflared/.json <p>ingress:   # Regla 1: Tr\u00e1fico del dominio al puerto 80 del servidor local.   - hostname: web.tudominio.com # Reemplaza con tu dominio     service: http://localhost:80   # Regla final: Bloquea cualquier otra petici\u00f3n no mapeada.   - service: http_status:404  Aqu\u00ed, http://localhost:80 se refiere al puerto del host donde est\u00e1 escuchando tu contenedor NGINX.</p> <p>C. Mapeo DNS y T\u00fanel Conecta el t\u00fanel a tu dominio en el panel de Cloudflare.</p> <p>cloudflared tunnel route dns wp-tunnel web.tudominio.com Esto crea autom\u00e1ticamente el registro DNS de tipo CNAME en tu zona de Cloudflare, apuntando a tu t\u00fanel.</p> <p>5.4. Ejecuci\u00f3n del Tunnel como Servicio Ejecuta el cliente cloudflared como un servicio persistente.</p> <p>Instalar el Servicio del Sistema (Systemd):</p> <p>sudo cloudflared tunnel run --overwrite-service Iniciar y Habilitar el Servicio:</p> <p>sudo systemctl start cloudflared sudo systemctl enable cloudflared Verificar el Estado:</p> <p>sudo systemctl status cloudflared El estado debe mostrarse como active (running).</p> <p>Una vez que el servicio est\u00e9 activo, tu sitio web de WordPress ser\u00e1 accesible a trav\u00e9s de web.tudominio.com sin que hayas abierto un solo puerto en tu router o firewall local. Todo el tr\u00e1fico pasa a trav\u00e9s de la infraestructura segura de Cloudflare.</p>"},{"location":"seguridad/cloudflare_tunnel/#caracteristicas-clave-de-podman","title":"\ud83d\udc33 Caracter\u00edsticas Clave de Podman","text":"<p>Podman destaca por su enfoque en la seguridad y la arquitectura descentralizada.</p> <p>El entorno web y de seguridad ya est\u00e1 configurado. El \u00faltimo gran componente es el servicio de monitoreo.</p>"},{"location":"seguridad/cloudflare_tunnel/#arquitectura-sin-demonio-daemonless","title":"Arquitectura Sin Demonio (Daemonless)","text":"<p>Seguridad: A diferencia de Docker, Podman no utiliza un demonio central (daemon) que se ejecuta como root. En su lugar, utiliza un modelo de arquitectura fork-exec, donde el comando podman inicia directamente el proceso del contenedor, que a su vez utiliza runc (el tiempo de ejecuci\u00f3n OCI).Ventaja: Esto elimina el riesgo de que un atacante que comprometa el daemon obtenga privilegios de root en el sistema operativo host.</p>"},{"location":"seguridad/cloudflare_tunnel/#contenedores-sin-privilegios-rootless-containers","title":"Contenedores Sin Privilegios (Rootless Containers)","text":"<p>Seguridad: La caracter\u00edstica m\u00e1s destacada de Podman es su capacidad para ejecutar contenedores como un usuario normal, sin requerir privilegios de root.Funcionamiento: Esto se logra utilizando los namespaces de usuario de Linux, mapeando el UID de root dentro del contenedor a un UID sin privilegios en el sistema host. Si el contenedor es comprometido, el atacante solo tiene los bajos privilegios del usuario host.</p>"},{"location":"seguridad/cloudflare_tunnel/#soporte-para-pods","title":"Soporte para Pods","text":"<p>Orquestaci\u00f3n Local: Podman es compatible con la idea de Pods, una caracter\u00edstica central de Kubernetes. Un Pod es un grupo de uno o m\u00e1s contenedores que comparten recursos como el namespace de red, el almacenamiento local y el IPC.Kubernetes: Podman puede generar archivos YAML de Kubernetes directamente a partir de contenedores o Pods en ejecuci\u00f3n, simplificando la transici\u00f3n del desarrollo local a la orquestaci\u00f3n en cl\u00fasteres.4. Compatibilidad con DockerInterfaz CLI: Podman utiliza comandos id\u00e9nticos o casi id\u00e9nticos a los de Docker (por ejemplo, podman run, podman ps, podman images), lo que permite a los usuarios con experiencia en Docker cambiar a Podman r\u00e1pidamente.Im\u00e1genes: Podman puede usar y construir im\u00e1genes de contenedor compatibles con Docker y OCI.</p>"},{"location":"web/despliegue_wordpress/","title":"2.2. Despliegue de WordPress Stack","text":"<ol> <li>Despliegue del Sitio Web con Podman Compose Este documento detalla la creaci\u00f3n y ejecuci\u00f3n del stack de tres contenedores (MariaDB, WordPress y NGINX) utilizando podman-compose. Este m\u00e9todo asegura que los servicios se orquesten correctamente, se comuniquen a trav\u00e9s de una red interna y persistan sus datos.</li> </ol> <p>4.1. Estructura de Directorios Trabajaremos dentro del directorio de nuestro usuario (admin en este ejemplo).</p> <p>cd ~ mkdir -p projects/wordpress-stack cd projects/wordpress-stack Dentro de este directorio, crearemos nuestro archivo de orquestaci\u00f3n y una carpeta para los archivos de configuraci\u00f3n de NGINX.</p> <p>4.2. Creaci\u00f3n del Archivo de Configuraci\u00f3n de NGINX Aunque NGINX actuar\u00e1 como proxy inverso, necesita un archivo de configuraci\u00f3n simple para redirigir el tr\u00e1fico al contenedor de WordPress.</p> <p>Crear el directorio de configuraci\u00f3n:</p> <p>mkdir -p nginx/conf.d Crear el archivo default.conf (nginx/conf.d/default.conf):</p> <p>Nginx</p> <pre><code>server {\n    listen 80;\n\n    location / {\n        # El nombre del servidor debe coincidir con el nombre del servicio de WordPress en podman-compose\n        proxy_pass http://wordpress:80; \n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n</code></pre> <p>Este archivo le dice a NGINX que escuche en el puerto 80 y pase todas las peticiones al servicio interno http://wordpress:80.</p> <p>4.3. El Archivo podman-compose.yml Este archivo define los tres servicios, sus dependencias, variables de entorno y los vol\u00famenes persistentes. Crea el archivo podman-compose.yml en la ra\u00edz de ~/projects/wordpress-stack/.</p> <pre><code>version: '3.8'\n\nservices:\n  # 1. Base de Datos (MariaDB)\n  db:\n    image: mariadb:10.11\n    container_name: mariadb_wp\n    restart: always\n    environment:\n      # *** MODIFICAR ESTOS VALORES ***\n      MARIADB_ROOT_PASSWORD: &lt;tu_password_root_db&gt; \n      MARIADB_DATABASE: wordpress\n      MARIADB_USER: wpuser\n      MARIADB_PASSWORD: &lt;tu_password_usuario_db&gt;\n    volumes:\n      - ~/data/mariadb:/var/lib/mysql # Persistencia de datos\n    networks:\n      - web_net\n\n  # 2. Aplicaci\u00f3n (WordPress)\n  wordpress:\n    image: wordpress:latest\n    container_name: wordpress_app\n    restart: always\n    depends_on:\n      - db # Asegura que la DB se inicie antes que WordPress\n    environment:\n      # Utiliza los mismos valores que en el servicio 'db'\n      WORDPRESS_DB_HOST: db:3306 # El nombre del servicio DB\n      WORDPRESS_DB_NAME: wordpress\n      WORDPRESS_DB_USER: wpuser\n      WORDPRESS_DB_PASSWORD: &lt;tu_password_usuario_db&gt;\n    volumes:\n      - ~/data/wordpress:/var/www/html # Persistencia de c\u00f3digo y uploads\n    networks:\n      - web_net\n\n  # 3. Proxy (NGINX)\n  nginx:\n    image: nginx:stable\n    container_name: nginx_proxy\n    restart: always\n    depends_on:\n      - wordpress\n    ports:\n      - \"80:80\"  # Puerto HTTP\n      - \"443:443\" # Puerto HTTPS\n    volumes:\n      - ./nginx/conf.d:/etc/nginx/conf.d:ro # Monta el archivo de configuraci\u00f3n creado\n    networks:\n      - web_net\n\nnetworks:\n  # Referencia a la red creada en el paso anterior (preparacion_podman.md)\n  web_net:\n    external: true\n</code></pre> <p>4.4. Despliegue de los Servicios Una vez que el archivo podman-compose.yml est\u00e9 listo, despliega el stack en modo detached (segundo plano):</p> <p>podman-compose up -d</p> <p>4.5. Verificaci\u00f3n Verificar el estado de los contenedores:</p> <p>podman ps Deber\u00edas ver los tres contenedores (mariadb_wp, wordpress_app, nginx_proxy) con el estado Up.</p> <p>Verificar el log de WordPress (opcional):</p> <p>podman logs -f wordpress_app Esto confirmar\u00e1 que WordPress se ha conectado correctamente a la base de datos MariaDB.</p> <p>Acceso Local: Si la red local lo permite, intenta acceder al sitio desde tu m\u00e1quina local usando la IP de la VM: http://192.168.1.XX. Deber\u00edas ver la pantalla de configuraci\u00f3n inicial de WordPress.</p> <p>Script para solucinonar poibles problemas con los permisos de Wordpress a la hora de subir archivos como im\u00e1genes al servidor</p> <pre><code>#!/bin/bash\n# Script para preparar directorios y permisos rootless de WordPress en Podman\n\nset -e\n\n# Variables\nVOLUME_PATH=\"$HOME/.local/share/containers/storage/volumes/www_wp_data/_data\"\nWP_CONTENT=\"$VOLUME_PATH/wp-content\"\n\necho \"\u2705 Creando directorios necesarios...\"\npodman unshare mkdir -p \"$WP_CONTENT/uploads\"\npodman unshare mkdir -p \"$WP_CONTENT/plugins\"\npodman unshare mkdir -p \"$WP_CONTENT/cache\"\n\necho \"\u2705 Ajustando propietario a www-data (UID 33:GID 33)...\"\npodman unshare chown -R 33:33 \"$WP_CONTENT\"\n\necho \"\u2705 Ajustando permisos a 775...\"\npodman unshare chmod -R 775 \"$WP_CONTENT\"\n\necho \"\u2705 Todo listo. WordPress puede escribir en wp-content.\"\n</code></pre>"},{"location":"web/preparacion_podman/","title":"2.1. Preparaci\u00f3n de Podman","text":"<ol> <li>Preparaci\u00f3n del Entorno para Contenedores con Podman Podman es una herramienta de gesti\u00f3n de contenedores daemonless (sin demonio), lo que lo convierte en una opci\u00f3n m\u00e1s ligera y segura que Docker, especialmente para entornos rootless (sin privilegios de root).</li> </ol> <p>3.1. Instalaci\u00f3n de Podman y Podman-Compose Podman est\u00e1 disponible en los repositorios de Debian Trixie (12).</p> <pre><code>Instalar Podman y podman-compose:\n</code></pre>"},{"location":"web/preparacion_podman/#podman-el-motor-de-contenedores","title":"Podman (el motor de contenedores)","text":"<p>sudo apt install -y podman</p>"},{"location":"web/preparacion_podman/#podman-compose-para-orquestacion-multi-contenedor-similar-a-docker-compose","title":"Podman-compose (para orquestaci\u00f3n multi-contenedor, similar a docker-compose)","text":"<pre><code>sudo apt install -y podman-compose\n</code></pre> <p>Verificar la Instalaci\u00f3n:</p> <pre><code>podman --version\npodman-compose --version\n</code></pre> <p>3.2. Configuraci\u00f3n de Entornos Rootless (Sin Root) Por seguridad, es una buena pr\u00e1ctica ejecutar contenedores con un usuario normal en lugar de root. Esto se conoce como modo Rootless.</p> <p>Verificar la configuraci\u00f3n de subordinate IDs: El sistema Debian ya debe haber configurado los archivos /etc/subuid y /etc/subgid para permitir al usuario est\u00e1ndar tener rangos de IDs para contenedores.</p> <p>Confirma que tu usuario (admin o el que hayas creado) aparece en estos archivos.</p> <p>Inicializaci\u00f3n del Entorno Rootless: La primera vez que ejecutas un comando Podman como tu usuario normal, el sistema inicializa autom\u00e1ticamente el entorno:</p>"},{"location":"web/preparacion_podman/#ejecuta-un-comando-simple-para-forzar-la-inicializacion","title":"Ejecuta un comando simple para forzar la inicializaci\u00f3n","text":"<pre><code>podman info\n</code></pre> <p>Configuraci\u00f3n del Registro de Contenedores: Si planeas utilizar registros no oficiales, edita el archivo de registros:</p>"},{"location":"web/preparacion_podman/#opcional-para-permitir-imagenes-no-firmadas-o-de-otros-registros","title":"Opcional: Para permitir im\u00e1genes no firmadas o de otros registros","text":"<pre><code>sudo vim /etc/containers/registries.conf\n</code></pre> <p>3.3. Estructura de Redes y Vol\u00famenes de Podman Para la comunicaci\u00f3n entre los contenedores de WordPress, NGINX y MariaDB, y para asegurar la persistencia de los datos, configuraremos una red y vol\u00famenes dedicados.</p> <p>A. Crear una Red Dedicada La red interna permitir\u00e1 que los contenedores se comuniquen usando sus nombres de servicio.</p>"},{"location":"web/preparacion_podman/#crea-una-nueva-red-podman-llamada-web_net","title":"Crea una nueva red Podman llamada 'web_net'","text":"<pre><code>podman network create web_net\n</code></pre> <p>B. Conceptos de Vol\u00famenes Persistentes En el archivo podman-compose.yml (que veremos a continuaci\u00f3n), mapearemos directorios locales a directorios dentro de los contenedores (volumes:).</p> <p>WordPress Data: Mapearemos una carpeta local (ej: /home/admin/data/wordpress) al directorio /var/www/html del contenedor de WordPress.</p> <p>Database Data: Mapearemos otra carpeta (ej: /home/admin/data/mariadb) al directorio de datos de MariaDB.</p> <p>Crear la estructura de carpetas de datos:</p> <pre><code>mkdir -p ~/data/wordpress\nmkdir -p ~/data/mariadb\n</code></pre> <p>Con Podman y su entorno rootless instalados, la red interna configurada y las carpetas de datos creadas, estamos listos para pasar al despliegue del stack de WordPress.</p>"}]}