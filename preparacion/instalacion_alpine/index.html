<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://jacedoe.github.io/server-labs/preparacion/instalacion_alpine/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>1.2. Despliegue VM Alpine LInux - Gu√≠a de Infraestructura Xen, Linux y contenedores</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "1.2. Despliegue VM Alpine LInux";
        var mkdocs_page_input_path = "preparacion/instalacion_alpine.md";
        var mkdocs_page_url = "/server-labs/preparacion/instalacion_alpine/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Gu√≠a de Infraestructura Xen, Linux y contenedores
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">üè° Inicio</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">üîí 1. Preparaci√≥n de la Infraestructura</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../instalacion_xo_lite/">1.1. Servidor XCP-ng</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">1.2. Despliegue VM Alpine LInux</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#121-requisitos-previos">1.2.1. Requisitos previos</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#122-creacion-de-la-maquina-virtual-en-xcp-ng">1.2.2. Creaci√≥n de la m√°quina virtual en XCP-ng</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#123-instalacion-base-de-alpine-linux">1.2.3. Instalaci√≥n base de Alpine Linux</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#124-configuracion-del-acceso-por-ssh">1.2.4. Configuraci√≥n del acceso por SSH</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#125-creacion-de-un-nuevo-usuario">1.2.5. Creaci√≥n de un nuevo usuario</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#126-configuracion-de-doas-sudo-en-alpine">1.2.6. Configuraci√≥n de doas (sudo en Alpine)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#127-instalacion-de-herramientas-basicas">1.2.7. Instalaci√≥n de herramientas b√°sicas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#128-instalacion-y-configuracion-de-docker">1.2.8. Instalaci√≥n y configuraci√≥n de Docker</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#129-configuracion-final-recomendada">1.2.9. Configuraci√≥n final recomendada</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">üîí 2. Despliegue en producci√≥n de sitio web</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../web/nginx_conf/">2.1. Intalaci√≥n de Nginx y Hugo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../web/despliegue_stack_web/">2.2. Configuraci√≥n del stack Nginx-MariaDB-WordPress</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../seguridad/cloudflare_tunnel/">2.3. Cloudflare Tunnel</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">üìö Ap√©ndices</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../apendices/comandos_utiles/">Comandos √ötiles</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../guia-de-estilo.md">üìò Gu√≠a de Estilo (Oficial)</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Gu√≠a de Infraestructura Xen, Linux y contenedores</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">üîí 1. Preparaci√≥n de la Infraestructura</li>
      <li class="breadcrumb-item active">1.2. Despliegue VM Alpine LInux</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/jacedoe/server-labs/edit/master/docs/preparacion/instalacion_alpine.md">Edit on server-labs</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="12-despliegue-vm-alpine-linux">1.2. Despliegue VM Alpine Linux<a class="headerlink" href="#12-despliegue-vm-alpine-linux" title="Permanent link">&para;</a></h1>
<p>Este apartado describe el proceso completo para desplegar una m√°quina virtual con Alpine Linux sobre un servidor XCP-ng, as√≠ como su configuraci√≥n inicial para dejarla lista para administraci√≥n remota y uso de contenedores con Docker.</p>
<h3 id="121-requisitos-previos">1.2.1. Requisitos previos<a class="headerlink" href="#121-requisitos-previos" title="Permanent link">&para;</a></h3>
<p>Antes de comenzar, aseg√∫rate de contar con:</p>
<p>Servidor XCP-ng correctamente instalado y operativo</p>
<p>Acceso a Xen Orchestra (XO Lite o completo)</p>
<p>Imagen ISO de Alpine Linux (Standard x86_64)</p>
<p>Conectividad de red funcional</p>
<p>Conocimientos b√°sicos de consola Linux</p>
<h3 id="122-creacion-de-la-maquina-virtual-en-xcp-ng">1.2.2. Creaci√≥n de la m√°quina virtual en XCP-ng<a class="headerlink" href="#122-creacion-de-la-maquina-virtual-en-xcp-ng" title="Permanent link">&para;</a></h3>
<p>Accede a Xen Orchestra</p>
<p>Selecciona New VM</p>
<p>Elige la plantilla:</p>
<p>Other install media</p>
<p>Asigna los recursos recomendados:</p>
<p>CPU: 1‚Äì2 vCPU</p>
<p>RAM: 512 MB (m√≠nimo) / 1 GB recomendado</p>
<p>Disco: 8‚Äì16 GB</p>
<p>Adjunta la ISO de Alpine Linux</p>
<p>Configura la interfaz de red (bridge por defecto)</p>
<p>Finaliza y arranca la VM</p>
<h3 id="123-instalacion-base-de-alpine-linux">1.2.3. Instalaci√≥n base de Alpine Linux<a class="headerlink" href="#123-instalacion-base-de-alpine-linux" title="Permanent link">&para;</a></h3>
<p>En la consola de la VM, inicia sesi√≥n como:</p>
<p>login: root</p>
<p>Ejecuta el instalador:</p>
<p>setup-alpine</p>
<p>Responde a las preguntas principales:</p>
<p>Teclado: es o us</p>
<p>Hostname: (ej. alpine-vm)</p>
<p>Red: DHCP (recomendado)</p>
<p>Zona horaria: Europe/Madrid (o la correspondiente)</p>
<p>Repositorio: por defecto</p>
<p>Disco: sys</p>
<p>Modo: standard</p>
<p>Confirma la instalaci√≥n y espera a que finalice.</p>
<p>Reinicia el sistema:</p>
<p>reboot</p>
<h3 id="124-configuracion-del-acceso-por-ssh">1.2.4. Configuraci√≥n del acceso por SSH<a class="headerlink" href="#124-configuracion-del-acceso-por-ssh" title="Permanent link">&para;</a></h3>
<p>Instala el servidor OpenSSH:</p>
<pre><code>apk add openssh
</code></pre>
<p>Habilita el servicio:</p>
<pre><code>rc-update add sshd
rc-service sshd start
</code></pre>
<p>Verifica que el servicio est√© activo:</p>
<pre><code>rc-service sshd status
</code></pre>
<p>(Opcional pero recomendado) Edita la configuraci√≥n:</p>
<pre><code>vi /etc/ssh/sshd_config
</code></pre>
<p>Aseg√∫rate de:</p>
<pre><code>PermitRootLogin no
PasswordAuthentication yes
</code></pre>
<p>Reinicia SSH:</p>
<pre><code>rc-service sshd restart
</code></pre>
<h3 id="125-creacion-de-un-nuevo-usuario">1.2.5. Creaci√≥n de un nuevo usuario<a class="headerlink" href="#125-creacion-de-un-nuevo-usuario" title="Permanent link">&para;</a></h3>
<p>Crea un usuario (ejemplo: admin):</p>
<pre><code>adduser admin
</code></pre>
<p>A√±√°delo a los grupos necesarios:</p>
<pre><code>addgroup admin wheel
</code></pre>
<p>Verifica:</p>
<pre><code>id admin
</code></pre>
<h3 id="126-configuracion-de-doas-sudo-en-alpine">1.2.6. Configuraci√≥n de doas (sudo en Alpine)<a class="headerlink" href="#126-configuracion-de-doas-sudo-en-alpine" title="Permanent link">&para;</a></h3>
<p>Alpine utiliza doas en lugar de sudo.</p>
<p>Instala doas:</p>
<pre><code>apk add doas
</code></pre>
<p>Edita el archivo de configuraci√≥n:</p>
<pre><code>vi /etc/doas.conf
</code></pre>
<p>A√±ade la siguiente l√≠nea:</p>
<pre><code>permit persist :wheel
</code></pre>
<p>Asegura permisos correctos:</p>
<pre><code>chmod 0400 /etc/doas.conf
</code></pre>
<p>Cambia al nuevo usuario y prueba:</p>
<pre><code>su - admin
doas apk update
</code></pre>
<h3 id="127-instalacion-de-herramientas-basicas">1.2.7. Instalaci√≥n de herramientas b√°sicas<a class="headerlink" href="#127-instalacion-de-herramientas-basicas" title="Permanent link">&para;</a></h3>
<p>Instala utilidades comunes para administraci√≥n:</p>
<pre><code>doas apk add \
  curl \
  wget \
  vim \
  btop \
  bash \
  git \
  ca-certificates
</code></pre>
<p>Establece Bash como shell por defecto (opcional):</p>
<pre><code>doas chsh -s /bin/bash admin
</code></pre>
<h3 id="128-instalacion-y-configuracion-de-docker">1.2.8. Instalaci√≥n y configuraci√≥n de Docker<a class="headerlink" href="#128-instalacion-y-configuracion-de-docker" title="Permanent link">&para;</a></h3>
<p>Instala Docker:</p>
<pre><code>doas apk add docker
</code></pre>
<p>Habilita el servicio:</p>
<pre><code>doas rc-update add docker
doas rc-service docker start
</code></pre>
<p>A√±ade el usuario al grupo docker:</p>
<pre><code>doas addgroup admin docker
</code></pre>
<p>Cierra sesi√≥n y vuelve a entrar para aplicar cambios.</p>
<p>Verifica la instalaci√≥n:</p>
<pre><code>docker version
docker run hello-world
</code></pre>
<h3 id="129-configuracion-final-recomendada">1.2.9. Configuraci√≥n final recomendada<a class="headerlink" href="#129-configuracion-final-recomendada" title="Permanent link">&para;</a></h3>
<p>Actualiza el sistema:</p>
<pre><code>doas apk update &amp;&amp; doas apk upgrade
</code></pre>
<p>Configura IP est√°tica (opcional):</p>
<pre><code>vi /etc/network/interfaces
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../instalacion_xo_lite/" class="btn btn-neutral float-left" title="1.1. Servidor XCP-ng"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../web/nginx_conf/" class="btn btn-neutral float-right" title="2.1. Intalaci√≥n de Nginx y Hugo">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/jacedoe/server-labs" class="fa fa-code-fork" style="color: #fcfcfc"> server-labs</a>
        </span>
    
    
      <span><a href="../instalacion_xo_lite/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../web/nginx_conf/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
